(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ef3366b"],{"51bf":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"row login-page"},[i("div",{staticClass:"col s12 z-depth-6 card-panel"},[i("h4",{staticClass:"pageTitle"},[e._v("レビューを投稿する")]),i("div",{staticClass:"login-form"},[i("div",[i("img",{staticClass:"iconChange",attrs:{src:e.videoDetail.thumbnailsUrl,alt:""}})]),i("div",{staticClass:"context"},[i("div",{staticClass:"stars hyouka"},[i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.evaluation,expression:"evaluation"}],attrs:{id:"review01",type:"radio",name:"review"},domProps:{value:5,checked:e._q(e.evaluation,5)},on:{change:function(t){e.evaluation=5}}}),i("label",{attrs:{for:"review01"}},[e._v("★")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.evaluation,expression:"evaluation"}],attrs:{id:"review02",type:"radio",name:"review",value:"4"},domProps:{checked:e._q(e.evaluation,"4")},on:{change:function(t){e.evaluation="4"}}}),i("label",{attrs:{for:"review02"}},[e._v("★")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.evaluation,expression:"evaluation"}],attrs:{id:"review03",type:"radio",name:"review",value:"3"},domProps:{checked:e._q(e.evaluation,"3")},on:{change:function(t){e.evaluation="3"}}}),i("label",{attrs:{for:"review03"}},[e._v("★")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.evaluation,expression:"evaluation"}],attrs:{id:"review04",type:"radio",name:"review",value:"2"},domProps:{checked:e._q(e.evaluation,"2")},on:{change:function(t){e.evaluation="2"}}}),i("label",{attrs:{for:"review04"}},[e._v("★")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.evaluation,expression:"evaluation"}],attrs:{id:"review05",type:"radio",name:"review",value:"1"},domProps:{checked:e._q(e.evaluation,"1")},on:{change:function(t){e.evaluation="1"}}}),i("label",{attrs:{for:"review05"}},[e._v("★")])])]),i("div",{staticClass:"row textarea"},[i("form",{staticClass:"col s12 offset-s1"},[i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review,expression:"review"}],staticClass:"materialize-textarea",attrs:{id:"textarea1"},domProps:{value:e.review},on:{input:function(t){t.target.composing||(e.review=t.target.value)}}}),i("label",{attrs:{for:"textarea1"}},[e._v("Review")])])])])]),i("div",{staticClass:"row login-btn"},[i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.postReview()}}},[i("span",[e._v("レビューを投稿")])])])])])])])])])},n=[],r=i("5530"),s=i("b85c"),o=i("1da1"),v=i("d4ec"),d=i("bee2"),c=i("262e"),l=i("2caf"),u=(i("96cf"),i("99af"),i("a4d3"),i("e01a"),i("d81d"),i("b0c0"),i("7db0"),i("d3b7"),i("a9e3"),i("9ab4")),p=i("1b40"),w=i("b166"),b=i("1519"),h=i("bc3a"),f=i.n(h),m=i("a88f"),C=i("dc59"),y=i("0829"),g=i("1c8c"),j=i("155d"),I=function(e){Object(c["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(v["a"])(this,i),e=t.apply(this,arguments),e.evaluation=0,e.review="",e.videoDetail=new b["a"](0,"","","","","",""),e.accountList=Array(),e.currentUserId=e.$store.getters.getCurrentUserId,e.reviewLastId=0,e}return Object(d["a"])(i,[{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i,a,n,o,v,d,c,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.$route.params.id,i=this.$store.getters.getApiKey,a=Object(s["a"])(i),e.prev=3,a.s();case 5:if((n=a.n()).done){e.next=24;break}return o=n.value,e.prev=7,e.next=10,f.a.get("https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&key=".concat(o,"&id=").concat(t));case 10:return v=e.sent,d=v.data.items[0],this.videoDetail=new b["a"](d.id,d.snippet.publishedAt,d.snippet.title,d.snippet.description,d.snippet.thumbnails.medium.url,d.snippet.channelTitle,d.statistics.viewCount),c=Object(y["a"])(C["a"],"アカウント一覧"),Object(y["d"])(c,(function(e){var t,i=e.docs.map((function(e){return Object(r["a"])({},e.data())})),a=Object(s["a"])(i);try{for(a.s();!(t=a.n()).done;){var n,o=t.value,v=Array(),d=Object(s["a"])(o.favoriteChannelList);try{for(d.s();!(n=d.n()).done;){var c=n.value;v.push(new j["a"](c.id,c.title,c.description,c.publishedAt,c.thumbnailsUrl,c.viewCount,c.subscriberCount,c.videoCount))}}catch(f){d.e(f)}finally{d.f()}var u,p=Array(),w=Object(s["a"])(o.reviewList);try{for(w.s();!(u=w.n()).done;){var h=u.value;p.push(new g["a"](h.reviewDate,h.reviewId,h.accountId,new b["a"](h.videos.id,h.videos.publishedAt,h.videos.title,h.videos.description,h.videos.thumbnailsUrl,h.videos.channelTitle,h.videos.viewCount),h.evaluation,h.review,h.favoriteCount))}}catch(f){w.e(f)}finally{w.f()}l.accountList.push(new m["a"](o.id,o.name,o.introduction,o.img,o.mailaddless,o.telephone,o.password,v,p))}}catch(f){a.e(f)}finally{a.f()}})),Object(y["d"])(Object(y["b"])(C["a"],"レビューラストID","レビューラストID"),(function(e){l.reviewLastId=Object(r["a"])({},e.data()).reviewLastId})),e.abrupt("return");case 19:e.prev=19,e.t0=e["catch"](7),console.log("APIerror");case 22:e.next=5;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](3),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,this,[[3,26,29,32],[7,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDate",value:function(){var e=Object(w["a"])(new Date,"yyyy年MM月dd日");return e}},{key:"postReview",value:function(){var e=this,t=this.accountList.find((function(t){return Number(t.id)===Number(e.currentUserId)}));if(void 0!==t){t.reviewList.push(new g["a"](this.getDate(),this.reviewLastId,t.id,this.videoDetail,this.evaluation,this.review,new Array));try{Object(y["e"])(Object(y["b"])(C["a"],"レビューラストID","レビューラストID"),{reviewLastId:Number(this.reviewLastId)+1});var i,a=Array(),n=Object(s["a"])(t.reviewList);try{for(n.s();!(i=n.n()).done;){var r=i.value;void 0===r.favoriteCount?a.push({reviewDate:r.reviewDate,reviewId:r.reviewId,accountId:r.accountId,videos:{id:r.videos.id,publishedAt:r.videos.publishedAt,title:r.videos.title,description:r.videos.description,thumbnailsUrl:r.videos.thumbnailsUrl,channelTitle:r.videos.channelTitle,viewCount:r.videos.viewCount},evaluation:r.evaluation,review:r.review,favoriteCount:[]}):a.push({reviewDate:r.reviewDate,reviewId:r.reviewId,accountId:r.accountId,videos:{id:r.videos.id,publishedAt:r.videos.publishedAt,title:r.videos.title,description:r.videos.description,thumbnailsUrl:r.videos.thumbnailsUrl,channelTitle:r.videos.channelTitle,viewCount:r.videos.viewCount},evaluation:r.evaluation,review:r.review,favoriteCount:r.favoriteCount})}}catch(u){n.e(u)}finally{n.f()}var o,v=Array(),d=Object(s["a"])(t.favoriteChannelList);try{for(d.s();!(o=d.n()).done;){var c=o.value;v.push({id:c.id,title:c.title,description:c.description,publishedAt:c.publishedAt,thumbnailsUrl:c.thumbnailsUrl,viewCount:c.viewCount,subscriberCount:c.subscriberCount,videoCount:c.videoCount})}}catch(u){d.e(u)}finally{d.f()}var l=Object(y["e"])(Object(y["b"])(C["a"],"アカウント一覧",String(t.id)),{id:t.id,name:t.name,introduction:t.introduction,img:t.img,mailaddless:t.mailaddless,telephone:t.telephone,password:t.password,favoriteChannelList:v,reviewList:a});console.log(l)}catch(p){console.error("Error adding document: ",p)}this.$router.push("/videoDetail/".concat(this.videoDetail.id))}}}]),i}(p["b"]);I=Object(u["a"])([p["a"]],I);var O=I,A=O,k=(i("86b3"),i("2877")),x=Object(k["a"])(A,a,n,!1,null,"725b6d29",null);t["default"]=x.exports},"7db0":function(e,t,i){"use strict";var a=i("23e7"),n=i("b727").find,r=i("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},"86b3":function(e,t,i){"use strict";i("de20")},de20:function(e,t,i){}}]);
//# sourceMappingURL=chunk-4ef3366b.0f8634cf.js.map