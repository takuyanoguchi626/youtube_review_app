{"version":3,"sources":["webpack:///./src/components/AddReview.vue?6927","webpack:///./src/components/AddReview.vue","webpack:///./src/components/AddReview.vue?2281","webpack:///./src/components/AddReview.vue?efef","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/components/AddReview.vue?aa87"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","videoDetail","thumbnailsUrl","directives","name","rawName","value","expression","domProps","_q","evaluation","on","$event","target","composing","review","postReview","staticRenderFns","XXXComponent","Videos","accountList","Array","currentUserId","$store","getters","getCurrentUserId","reviewLastId","videoId","$route","params","id","keys","getApiKey","key","axios","get","responce","responceVideo","data","items","snippet","publishedAt","title","description","thumbnails","medium","url","channelTitle","statistics","viewCount","post","collection","db","onSnapshot","accountListByDb","docs","map","doc","account","favoriteChannelList","channel","push","Channels","subscriberCount","videoCount","reviewList","Review","reviewDate","reviewId","accountId","videos","favoriteCount","Account","introduction","img","mailaddless","telephone","password","console","log","nowDate","format","Date","find","Number","undefined","getDate","setDoc","reviewArr","channelArr","docRef","String","e","error","$router","Vue","Component","component","$","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","forced","callbackfn","arguments","length"],"mappings":"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","file":"js/chunk-4ef3366b.0f8634cf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row login-page\"},[_c('div',{staticClass:\"col s12 z-depth-6 card-panel\"},[_c('h4',{staticClass:\"pageTitle\"},[_vm._v(\"レビューを投稿する\")]),_c('div',{staticClass:\"login-form\"},[_c('div',[_c('img',{staticClass:\"iconChange\",attrs:{\"src\":_vm.videoDetail.thumbnailsUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"context\"},[_c('div',{staticClass:\"stars hyouka\"},[_c('span',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.evaluation),expression:\"evaluation\"}],attrs:{\"id\":\"review01\",\"type\":\"radio\",\"name\":\"review\"},domProps:{\"value\":5,\"checked\":_vm._q(_vm.evaluation,5)},on:{\"change\":function($event){_vm.evaluation=5}}}),_c('label',{attrs:{\"for\":\"review01\"}},[_vm._v(\"★\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.evaluation),expression:\"evaluation\"}],attrs:{\"id\":\"review02\",\"type\":\"radio\",\"name\":\"review\",\"value\":\"4\"},domProps:{\"checked\":_vm._q(_vm.evaluation,\"4\")},on:{\"change\":function($event){_vm.evaluation=\"4\"}}}),_c('label',{attrs:{\"for\":\"review02\"}},[_vm._v(\"★\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.evaluation),expression:\"evaluation\"}],attrs:{\"id\":\"review03\",\"type\":\"radio\",\"name\":\"review\",\"value\":\"3\"},domProps:{\"checked\":_vm._q(_vm.evaluation,\"3\")},on:{\"change\":function($event){_vm.evaluation=\"3\"}}}),_c('label',{attrs:{\"for\":\"review03\"}},[_vm._v(\"★\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.evaluation),expression:\"evaluation\"}],attrs:{\"id\":\"review04\",\"type\":\"radio\",\"name\":\"review\",\"value\":\"2\"},domProps:{\"checked\":_vm._q(_vm.evaluation,\"2\")},on:{\"change\":function($event){_vm.evaluation=\"2\"}}}),_c('label',{attrs:{\"for\":\"review04\"}},[_vm._v(\"★\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.evaluation),expression:\"evaluation\"}],attrs:{\"id\":\"review05\",\"type\":\"radio\",\"name\":\"review\",\"value\":\"1\"},domProps:{\"checked\":_vm._q(_vm.evaluation,\"1\")},on:{\"change\":function($event){_vm.evaluation=\"1\"}}}),_c('label',{attrs:{\"for\":\"review05\"}},[_vm._v(\"★\")])])]),_c('div',{staticClass:\"row textarea\"},[_c('form',{staticClass:\"col s12 offset-s1\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"input-field col s12\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.review),expression:\"review\"}],staticClass:\"materialize-textarea\",attrs:{\"id\":\"textarea1\"},domProps:{\"value\":(_vm.review)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.review=$event.target.value}}}),_c('label',{attrs:{\"for\":\"textarea1\"}},[_vm._v(\"Review\")])])])])]),_c('div',{staticClass:\"row login-btn\"},[_c('button',{staticClass:\"btn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.postReview()}}},[_c('span',[_vm._v(\"レビューを投稿\")])])])])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport { format } from \"date-fns\";\r\nimport { Videos } from \"@/types/Videos\";\r\nimport axios from \"axios\";\r\nimport { Account } from \"@/types/Account\";\r\nimport db from \"../firebase.js\";\r\nimport { collection, doc, onSnapshot, setDoc } from \"@firebase/firestore\";\r\nimport { Review } from \"@/types/Review\";\r\nimport { Channels } from \"@/types/Channels\";\r\n@Component\r\nexport default class XXXComponent extends Vue {\r\n  /* eslint @typescript-eslint/no-explicit-any: 0 */\r\n  //5段階評価\r\n  private evaluation = 0;\r\n  //レビュー内容\r\n  private review = \"\";\r\n  //レビューをする動画の情報\r\n  private videoDetail = new Videos(0, \"\", \"\", \"\", \"\", \"\", \"\");\r\n  //DBの中のアカウントリスト\r\n  private accountList = Array<Account>();\r\n  //ログインしているユーザーのID\r\n  private currentUserId = this.$store.getters.getCurrentUserId;\r\n  //最後に投稿したレビューのID(DBから持ってきて入れる)\r\n  private reviewLastId = 0;\r\n\r\n  async created(): Promise<void> {\r\n    //URLから受け取ったvideoID\r\n    const videoId = this.$route.params.id;\r\n    //APIKeyの配列\r\n    const keys = this.$store.getters.getApiKey;\r\n    for (const key of keys) {\r\n      try {\r\n        const responce = await axios.get(\r\n          `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&key=${key}&id=${videoId}`\r\n        );\r\n        const responceVideo = responce.data.items[0];\r\n        this.videoDetail = new Videos(\r\n          responceVideo.id,\r\n          responceVideo.snippet.publishedAt,\r\n          responceVideo.snippet.title,\r\n          responceVideo.snippet.description,\r\n          responceVideo.snippet.thumbnails.medium.url,\r\n          responceVideo.snippet.channelTitle,\r\n          responceVideo.statistics.viewCount\r\n        );\r\n        //DBからアカウント一覧を取得\r\n        const post = collection(db, \"アカウント一覧\");\r\n        onSnapshot(post, (post) => {\r\n          const accountListByDb = post.docs.map((doc) => ({ ...doc.data() }));\r\n          for (const account of accountListByDb) {\r\n            const favoriteChannelList = Array<Channels>();\r\n            for (const channel of account.favoriteChannelList) {\r\n              favoriteChannelList.push(\r\n                new Channels(\r\n                  channel.id,\r\n                  channel.title,\r\n                  channel.description,\r\n                  channel.publishedAt,\r\n                  channel.thumbnailsUrl,\r\n                  channel.viewCount,\r\n                  channel.subscriberCount,\r\n                  channel.videoCount\r\n                )\r\n              );\r\n            }\r\n            const reviewList = Array<Review>();\r\n            for (const review of account.reviewList) {\r\n              reviewList.push(\r\n                new Review(\r\n                  review.reviewDate,\r\n                  review.reviewId,\r\n                  review.accountId,\r\n                  new Videos(\r\n                    review.videos.id,\r\n                    review.videos.publishedAt,\r\n                    review.videos.title,\r\n                    review.videos.description,\r\n                    review.videos.thumbnailsUrl,\r\n                    review.videos.channelTitle,\r\n                    review.videos.viewCount\r\n                  ),\r\n                  review.evaluation,\r\n                  review.review,\r\n                  review.favoriteCount\r\n                )\r\n              );\r\n            }\r\n            this.accountList.push(\r\n              new Account(\r\n                account.id,\r\n                account.name,\r\n                account.introduction,\r\n                account.img,\r\n                account.mailaddless,\r\n                account.telephone,\r\n                account.password,\r\n                favoriteChannelList,\r\n                reviewList\r\n              )\r\n            );\r\n          }\r\n        });\r\n        //DBからレビューラストIDを取得\r\n        onSnapshot(doc(db, \"レビューラストID\", \"レビューラストID\"), (doc) => {\r\n          this.reviewLastId = { ...doc.data() }.reviewLastId;\r\n        });\r\n        return;\r\n      } catch (e) {\r\n        console.log(\"APIerror\");\r\n      }\r\n    } //end APIのtry,chatch\r\n  } //end created\r\n  /**\r\n   * 現在時刻をフォーマット化して取得.\r\n   *\r\n   * @returns フォーマット化された現在時刻\r\n   */\r\n  getDate(): string {\r\n    const nowDate = format(new Date(), \"yyyy年MM月dd日\");\r\n    return nowDate;\r\n  }\r\n  /**\r\n   * レビューを投稿、DBに格納する.\r\n   */\r\n  postReview(): void {\r\n    //DBのアカウント一覧から、今ログイン中のアカウント情報を取得\r\n    const account = this.accountList.find(\r\n      (account) => Number(account.id) === Number(this.currentUserId)\r\n    );\r\n    if (account !== undefined) {\r\n      account.reviewList.push(\r\n        new Review(\r\n          this.getDate(),\r\n          this.reviewLastId,\r\n          account.id,\r\n          this.videoDetail,\r\n          this.evaluation,\r\n          this.review,\r\n          new Array<number>()\r\n        )\r\n      );\r\n      try {\r\n        //DBのレビューラストIDを一つプラスする\r\n        setDoc(doc(db, \"レビューラストID\", \"レビューラストID\"), {\r\n          reviewLastId: Number(this.reviewLastId) + 1,\r\n        });\r\n        //インスタンス化されたものをDBに格納するために連想配列の形に変える\r\n        const reviewArr = Array<any>();\r\n        for (const review of account.reviewList) {\r\n          if (review.favoriteCount === undefined) {\r\n            reviewArr.push({\r\n              reviewDate: review.reviewDate,\r\n              reviewId: review.reviewId,\r\n              accountId: review.accountId,\r\n              videos: {\r\n                id: review.videos.id,\r\n                publishedAt: review.videos.publishedAt,\r\n                title: review.videos.title,\r\n                description: review.videos.description,\r\n                thumbnailsUrl: review.videos.thumbnailsUrl,\r\n                channelTitle: review.videos.channelTitle,\r\n                viewCount: review.videos.viewCount,\r\n              },\r\n              evaluation: review.evaluation,\r\n              review: review.review,\r\n              favoriteCount: [],\r\n            });\r\n          } else {\r\n            reviewArr.push({\r\n              reviewDate: review.reviewDate,\r\n              reviewId: review.reviewId,\r\n              accountId: review.accountId,\r\n              videos: {\r\n                id: review.videos.id,\r\n                publishedAt: review.videos.publishedAt,\r\n                title: review.videos.title,\r\n                description: review.videos.description,\r\n                thumbnailsUrl: review.videos.thumbnailsUrl,\r\n                channelTitle: review.videos.channelTitle,\r\n                viewCount: review.videos.viewCount,\r\n              },\r\n              evaluation: review.evaluation,\r\n              review: review.review,\r\n              favoriteCount: review.favoriteCount,\r\n            });\r\n          }\r\n        }\r\n        const channelArr = Array<any>();\r\n        for (const channel of account.favoriteChannelList) {\r\n          channelArr.push({\r\n            id: channel.id,\r\n            title: channel.title,\r\n            description: channel.description,\r\n            publishedAt: channel.publishedAt,\r\n            thumbnailsUrl: channel.thumbnailsUrl,\r\n            viewCount: channel.viewCount,\r\n            subscriberCount: channel.subscriberCount,\r\n            videoCount: channel.videoCount,\r\n          });\r\n        }\r\n        // レビューをDBに保存\r\n        const docRef = setDoc(doc(db, \"アカウント一覧\", String(account.id)), {\r\n          id: account.id,\r\n          name: account.name,\r\n          introduction: account.introduction,\r\n          img: account.img,\r\n          mailaddless: account.mailaddless,\r\n          telephone: account.telephone,\r\n          password: account.password,\r\n          favoriteChannelList: channelArr,\r\n          reviewList: reviewArr,\r\n        });\r\n        console.log(docRef);\r\n      } catch (e) {\r\n        console.error(\"Error adding document: \", e);\r\n      }\r\n      this.$router.push(`/videoDetail/${this.videoDetail.id}`);\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddReview.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddReview.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddReview.vue?vue&type=template&id=725b6d29&scoped=true&\"\nimport script from \"./AddReview.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddReview.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddReview.vue?vue&type=style&index=0&id=725b6d29&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"725b6d29\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddReview.vue?vue&type=style&index=0&id=725b6d29&scoped=true&lang=css&\""],"sourceRoot":""}